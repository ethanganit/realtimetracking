
var baseMapLayer = new ol.layer.Tile({
  source: new ol.source.OSM()

});

var map = new ol.Map({
  target: 'map',
  layers: [ baseMapLayer],
  view: new ol.View({
          center: ol.proj.fromLonLat([80.2459,12.9860]),
          zoom: 15 //Initial Zoom Level
        })
});


var iconStyle = new ol.style.Style({
image: new ol.style.Icon(/** @type {module:ol/style/Icon~Options} */ ({
  anchor: [0.5, 16],
  anchorXUnits: 'fraction',
  anchorYUnits: 'pixels',
  src: 'data/icon.png'
}))
});



//Adding a marker on the map
var marker = new ol.Feature({
  geometry: new ol.geom.Point(
    ol.proj.fromLonLat([80.24586,12.9859])
  )
});

marker.setStyle(iconStyle);


var vectorSource = new ol.source.Vector({
  features: [marker]
});


var markerVectorLayer = new ol.layer.Vector({
  source: vectorSource,

});

markerVectorLayer.once("change", function(){
    console.log('markerVectorLayer changed' );
    map.setView(new ol.View({
      center: marker.getGeometry().getCoordinates(),
      zoom: 15
    }));
  });



map.addLayer(markerVectorLayer);


function updateCoordinate(item) {
    var featureToUpdate = marker;

    var coord = ol.proj.fromLonLat([item.Coordinate.Longitude, item.Coordinate.Latitude]);

    featureToUpdate.getGeometry().setCoordinates(coord);
}

console.log(marker.getId);



//updateCoordinate(item);



var longlats =
[[80.24586,12.98598],
[80.24537,12.98597],
[80.24522,12.98596],
[80.24522,12.98614],
[80.24523,12.98626],
[80.24508,12.98626],
[80.24452,12.98624],
[80.24382,12.98624],
[80.2435,12.98625],
[80.24324,12.98624],
[80.24328,12.98443],
[80.24332,12.98398],
[80.24336,12.98289],
[80.24339,12.98214],
[80.24341,12.98138],
[80.24342,12.9813],
[80.24324,12.9813],
[80.24313,12.9813],
[80.24286,12.98132],
[80.24276,12.98131],
[80.24253,12.98132],
[80.24244,12.98132],
[80.24228,12.98132],
[80.24216,12.98132],
[80.24196,12.98132],
[80.24183,12.98132],
[80.24,12.98129],
[80.23977,12.98128],
[80.23967,12.98128],
[80.2394,12.98127],
[80.23882,12.98125],
[80.23791,12.98124],
[80.2377,12.98125],
[80.23662,12.98121],
[80.23661,12.98121],
[80.23589,12.98119],
[80.23586,12.98119],
[80.23542,12.98117],
[80.23487,12.98116],
[80.23486,12.98116],
[80.23475,12.98116],
[80.23464,12.98117],
[80.23452,12.98118],
[80.2344,12.98119],
[80.23438,12.9812],
[80.23428,12.98121],
[80.23417,12.98123],
[80.23415,12.98124],
[80.23406,12.98127],
[80.23403,12.98128],
[80.23392,12.98132],
[80.23367,12.98143],
[80.23363,12.98145],
[80.23362,12.98145],
[80.23342,12.98154],
[80.23313,12.98167],
[80.23295,12.98175],
[80.23295,12.98176],
[80.23284,12.9818],
[80.2327,12.98186],
[80.23257,12.9819],
[80.23249,12.98192],
[80.23236,12.98195],
[80.23228,12.98197],
[80.23217,12.98198],
[80.23203,12.98199],
[80.23178,12.98198],
[80.23159,12.98197],
[80.23147,12.98195],
[80.23129,12.98192],
[80.23111,12.98187],
[80.23076,12.98174],
[80.23069,12.9817],
[80.23028,12.98145],
[80.22934,12.98088],
[80.22927,12.98083],
[80.22837,12.9803],
[80.22827,12.98024],
[80.22735,12.97967],
[80.22682,12.97935],
[80.22658,12.9792],
[80.22552,12.97853],
[80.22549,12.97851],
[80.22516,12.9783],
[80.22466,12.97799],
[80.2244,12.97784],
[80.22358,12.97737],
[80.2235,12.97732],
[80.22287,12.97695],
[80.22278,12.9769],
[80.22225,12.97657],
[80.22212,12.97648],
[80.22203,12.97643],
[80.22168,12.97618],
[80.22145,12.97595],
[80.22129,12.9758],
[80.22083,12.97538],
[80.22075,12.97524],
[80.22067,12.97498],
[80.22053,12.97456],
[80.22043,12.97433],
[80.21998,12.9734],
[80.21983,12.97312],
[80.21955,12.97235],
[80.21952,12.97226],
[80.2194,12.97188],
[80.21932,12.97167],
[80.21911,12.9712],
[80.2189,12.97072],
[80.21881,12.97048],
[80.21792,12.96813],
[80.2178,12.96783],
[80.21769,12.96753],
[80.21761,12.96734],
[80.21752,12.96715],
[80.21728,12.96654],
[80.21645,12.96454],
[80.21639,12.9643],
[80.21632,12.9641],
[80.21625,12.96395],
[80.21601,12.96351],
[80.21467,12.96019],
[80.21435,12.9594],
[80.21384,12.95809],
[80.21333,12.95695],
[80.21332,12.95685],
[80.21194,12.95329],
[80.21143,12.95194],
[80.21112,12.95121],
[80.21017,12.94867],
[80.21009,12.94851],
[80.21008,12.94849],
[80.20999,12.9483],
[80.20991,12.9481],
[80.20948,12.94704],
[80.20909,12.94602],
[80.20892,12.94563],
[80.20864,12.94492],
[80.20845,12.94445],
[80.2084,12.94432],
[80.20832,12.94414],
[80.20831,12.94411],
[80.20818,12.94382],
[80.20807,12.94356],
[80.20794,12.94329],
[80.20789,12.94323],
[80.20781,12.94313],
[80.2078,12.94312],
[80.20771,12.94304],
[80.20763,12.94298],
[80.2073,12.94274],
[80.20726,12.9427],
[80.20717,12.94261],
[80.20712,12.94257],
[80.20696,12.94241],
[80.20678,12.94221],
[80.20659,12.942],
[80.20645,12.94182],
[80.2064,12.94177],
[80.20633,12.94167],
[80.20625,12.94156],
[80.20621,12.9415],
[80.20613,12.94134],
[80.20601,12.94103],
[80.20597,12.94094],
[80.20593,12.94085],
[80.20584,12.94067],
[80.20565,12.94008],
[80.20511,12.93835],
[80.20486,12.93743],
[80.20443,12.93595],
[80.20438,12.93579],
[80.20426,12.93547],
[80.20419,12.93535],
[80.20413,12.93523],
[80.2041,12.93513],
[80.20404,12.93494],
[80.20401,12.93474],
[80.20396,12.93435],
[80.20394,12.93412],
[80.20391,12.93377],
[80.20391,12.93361],
[80.20391,12.93354],
[80.20386,12.93338],
[80.20381,12.93324],
[80.20375,12.9331],
[80.2037,12.93294],
[80.20369,12.93292],
[80.20356,12.93264],
[80.20346,12.93232],
[80.20319,12.93153],
[80.20313,12.93135],
[80.203,12.93092],
[80.20296,12.9308],
[80.20293,12.93067],
[80.2029,12.93053],
[80.20288,12.9304],
[80.20286,12.93023],
[80.20285,12.93013],
[80.20283,12.93004],
[80.20275,12.92942],
[80.20275,12.92941],
[80.20274,12.92932],
[80.20272,12.9292],
[80.20269,12.92902],
[80.20267,12.92887],
[80.20266,12.92884],
[80.20265,12.92879],
[80.20263,12.92875],
[80.20261,12.92871],
[80.20258,12.92868],
[80.20252,12.92863],
[80.20248,12.92861],
[80.20242,12.92859],
[80.20233,12.92857],
[80.2023,12.92856],
[80.20201,12.92853],
[80.20181,12.92851],
[80.20173,12.92851],
[80.20149,12.9285],
[80.20102,12.92846],
[80.20072,12.92845],
[80.20049,12.92843],
[80.20031,12.92842],
[80.20013,12.9284],
[80.19999,12.92838],
[80.1998,12.92834],
[80.19968,12.9283],
[80.19965,12.92829],
[80.19955,12.92826],
[80.19947,12.92823],
[80.19932,12.92816],
[80.19929,12.92814],
[80.19928,12.92814],
[80.19874,12.92788],
[80.19843,12.92775],
[80.19834,12.9277],
[80.19832,12.92768],
[80.19824,12.92761],
[80.19815,12.92751],
[80.19808,12.92742],
[80.19803,12.92734],
[80.19795,12.92722],
[80.19789,12.92711],
[80.19783,12.92699],
[80.1978,12.92693],
[80.19774,12.92682],
[80.19764,12.9266],
[80.19755,12.92637],
[80.19753,12.92625],
[80.19751,12.92615],
[80.19752,12.92563],
[80.19751,12.92555],
[80.19751,12.92553],
[80.19751,12.92541],
[80.19751,12.9251],
[80.19751,12.9247],
[80.19749,12.92389],
[80.19749,12.92375],
[80.19745,12.92328],
[80.19741,12.92297],
[80.19732,12.92242],
[80.1973,12.92229],
[80.19728,12.92215],
[80.19724,12.922],
[80.19715,12.92176],
[80.19693,12.92116],
[80.1969,12.92107],
[80.1968,12.92077],
[80.19673,12.92058],
[80.19668,12.92046],
[80.19665,12.92037],
[80.1966,12.9202],
[80.19651,12.91996],
[80.19635,12.91957],
[80.19629,12.91947],
[80.1962,12.91931],
[80.19614,12.91923],
[80.19603,12.91908],
[80.19578,12.91877],
[80.19572,12.91871],
[80.19555,12.91853],
[80.19546,12.91843],
[80.1954,12.91836],
[80.19526,12.91821],
[80.19517,12.91812],
[80.19515,12.9181],
[80.195,12.91793],
[80.19491,12.91784],
[80.19487,12.91778],
[80.19479,12.91765],
[80.19475,12.91759],
[80.19474,12.91755],
[80.19466,12.91743],
[80.1946,12.91732],
[80.1945,12.91721],
[80.19435,12.91706],
[80.1943,12.91703],
[80.19423,12.917],
[80.19413,12.917],
[80.19402,12.91697],
[80.19386,12.91695],
[80.19353,12.91696],
[80.19329,12.91699],
[80.19293,12.91703],
[80.19268,12.91706],
[80.19259,12.91706],
[80.19255,12.91707],
[80.19237,12.91709],
[80.19229,12.9171],
[80.19202,12.91714],
[80.19168,12.91719],
[80.19097,12.91726],
[80.19039,12.91732],
[80.19028,12.91732],
[80.1899,12.91739],
[80.18971,12.91744],
[80.18961,12.91747],
[80.18952,12.9175],
[80.18945,12.91753],
[80.18926,12.91764],
[80.18903,12.91777],
[80.18888,12.91786],
[80.18869,12.918],
[80.18838,12.91825],
[80.18811,12.91848],
[80.18782,12.91873],
[80.18742,12.91908],
[80.18731,12.91917],
[80.18696,12.91948],
[80.18631,12.92005],
[80.18599,12.92029],
[80.18586,12.92036],
[80.18579,12.9204],
[80.18569,12.92044],
[80.1856,12.92045],
[80.18548,12.92046],
[80.18534,12.92047],
[80.18522,12.92047],
[80.18509,12.92046],
[80.18497,12.92044],
[80.18495,12.92044],
[80.18456,12.92036],
[80.18401,12.92022],
[80.1839,12.92019],
[80.18356,12.92011],
[80.18301,12.91998],
[80.18239,12.91983],
[80.18208,12.91977],
[80.18199,12.91975],
[80.18189,12.91973],
[80.18183,12.91971],
[80.18122,12.91958],
[80.18081,12.9195],
[80.18014,12.91935],
[80.17982,12.91929],
[80.17966,12.91924],
[80.17955,12.91921],
[80.17943,12.91918],
[80.17933,12.91915],
[80.17924,12.9191],
[80.17919,12.91907],
[80.17903,12.91896],
[80.17892,12.91887],
[80.17886,12.91883],
[80.17871,12.91872],
[80.17832,12.91842],
[80.17811,12.91829],
[80.17798,12.91824],
[80.17788,12.91822],
[80.17781,12.91821],
[80.1778,12.91821],
[80.17774,12.9182],
[80.17769,12.9182],
[80.17759,12.91821],
[80.17723,12.91827],
[80.17655,12.91839],
[80.17606,12.9185],
[80.17598,12.91852],
[80.17583,12.91856],
[80.17543,12.91868],
[80.17453,12.91889],
[80.17286,12.91931],
[80.1721,12.91953],
[80.17138,12.91972],
[80.17059,12.91997],
[80.17018,12.92009],
[80.17,12.92015],
[80.16981,12.92021],
[80.16863,12.92057],
[80.16853,12.9206],
[80.1682,12.9207],
[80.16786,12.92081],
[80.16736,12.92095],
[80.16725,12.92099],
[80.16667,12.92117],
[80.16628,12.9213],
[80.1659,12.92142],
[80.16557,12.92153],
[80.16496,12.92173],
[80.16475,12.9218],
[80.16457,12.92185],
[80.1642,12.92198],
[80.16378,12.9221],
[80.16343,12.92221],
[80.16339,12.92223],
[80.16293,12.92237],
[80.16269,12.92244],
[80.16265,12.92245],
[80.16238,12.92253],
[80.16092,12.92299],
[80.1605,12.92313],
[80.16046,12.92314],
[80.16021,12.92322],
[80.16003,12.92327],
[80.15971,12.92332],
[80.1595,12.92335],
[80.15924,12.92338],
[80.1588,12.92343],
[80.15869,12.92344],
[80.1584,12.92346],
[80.15814,12.92348],
[80.15699,12.92356],
[80.15634,12.92363],
[80.15632,12.92363],
[80.15606,12.92364],
[80.15599,12.92364],
[80.15591,12.92363],
[80.15582,12.92361],
[80.15577,12.9236],
[80.15564,12.92357],
[80.1555,12.92354],
[80.15546,12.92353],
[80.15514,12.92344],
[80.15507,12.92343],
[80.15503,12.92342],
[80.155,12.92341],
[80.15482,12.92337],
[80.15463,12.92334],
[80.15455,12.92332],
[80.15437,12.92327],
[80.1542,12.92322],
[80.15402,12.92316],
[80.15384,12.92311],
[80.15353,12.92305],
[80.15284,12.9229],
[80.15268,12.92286],
[80.15254,12.92282],
[80.15246,12.9228],
[80.15241,12.92279],
[80.15229,12.92277],
[80.1522,12.92274],
[80.1521,12.92273],
[80.15197,12.92271],
[80.15182,12.92269],
[80.15171,12.92269],
[80.1517,12.92269],
[80.15131,12.92268],
[80.15118,12.92268],
[80.1511,12.92268],
[80.15069,12.92267],
[80.15049,12.92266],
[80.15033,12.92266],
[80.14998,12.92265],
[80.14972,12.92264],
[80.14936,12.92263],
[80.14914,12.92262],
[80.14892,12.9226],
[80.14877,12.92259],
[80.14835,12.92258],
[80.1482,12.92259],
[80.14793,12.9226],
[80.14767,12.9226],
[80.14744,12.9226],
[80.14698,12.92259],
[80.1467,12.92258],
[80.14594,12.92258],
[80.14578,12.92257],
[80.14567,12.92257],
[80.14533,12.92254],
[80.14498,12.92253],
[80.14385,12.9225],
[80.14298,12.92247],
[80.14303,12.92237]
];

var count = 1;
var item = {};
item.id = marker.getId;
item.Coordinate = {};
setInterval(function() {
  item.Coordinate.Longitude = longlats[count][0];
  item.Coordinate.Latitude = longlats[count][1];
  count++;
  updateCoordinate(item);
}, 5000);



